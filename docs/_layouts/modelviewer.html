---
---

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 | default: "en" }}" class="no-js">
<head>
    <meta charset="utf-8">

    {% include seo.html %}

    <link href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ '/feed.xml' | relative_url }}{% endif %}" type="application/atom+xml" rel="alternate" title="{{ site.title }} Feed">

    <!-- https://t.co/dKP3o1e -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script>
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
    </script>
    <!-- For all browsers -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">

    <!--[if IE]>
      <style>
        /* old IE unsupported flexbox fixes */
        .greedy-nav .site-title {
          padding-right: 3em;
        }
        .greedy-nav button {
          position: absolute;
          top: 0;
          right: 0;
          height: 100%;
        }
      </style>
    <![endif]-->

    {% if site.head_scripts %}
      {% for script in site.head_scripts %}
        <script src="{{ script | relative_url }}"></script>
      {% endfor %}
    {% endif %}

    {% include head/custom.html %}
</head>
<body>
  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    {% if page.title %}<meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.excerpt %}<meta itemprop="description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.date %}<meta itemprop="datePublished" content="{{ page.date | date_to_xmlschema }}">{% endif %}
    {% if page.last_modified_at %}<meta itemprop="dateModified" content="{{ page.last_modified_at | date_to_xmlschema }}">{% endif %}
  </article>
  <babylon id="babylon-viewer" model="{{ page.glb | relative_url }}" thumbnail="{{ page.poster | relative_url }}" configuration="{{ site.baseurl }}/assets/viewerConfig.json">
    <templates>
      <loading-screen><params background-color="#A0A0A0" static-loading-image="{{ page.poster | relative_url }}"></params></loading-screen>
    </templates>
  </babylon>
  <div id="open-in-ar"></div>
  <script>
    // Check if AR is available.
    var isARAvailable = function() {
      const a = document.createElement("a");
      return a.relList.supports("ar");
    }

    if(isARAvailable()) {
      // AR available, so show the AR link
      var openinarElement = document.getElementById("open-in-ar");
      openinarElement.className="arvr_container_lower_left";
      openinarElement.innerHTML = `
        <a rel='ar' href='{{ page.usdz | relative_url }}'>
          <img src="{{ site.baseurl }}/assets/images/ARKit-Badge.png"
               srcset="{{ site.baseurl }}/assets/images/ARKit-Badge.png 1x, {{ site.baseurl }}/assets/images/ARKit-Badge@2x.png 2x, {{ site.baseurl }}/assets/images/ARKit-Badge@3x.png 3x" />
        </a>
      `;
    }

    var vrSupported = 'getVRDisplays' in navigator;
    if( vrSupported ) {
      var viewer = document.getElementById("babylon-viewer");
      viewer.innerHTML = "<VR></VR>" + viewer.innerHTML;
      viewer.setAttribute("templates.navBar.hideVr","false");
    }
  </script>
  <script src="{{ site.baseurl }}/assets/js/babylon.viewer.js"></script>
{% comment %} 
  <script>
    BabylonViewer.viewerManager.getViewerPromiseById('babylon-viewer').then(function(viewer) {
      viewer.createDefaultXRExperienceAsync();
      viewer.onEngineInitObservable.add(function(scene) {
        // TODO: Can we determine if WebXR is properly enabled, and show the button?
      });
    });
  </script>
{% endcomment %}
</body>
</html>
