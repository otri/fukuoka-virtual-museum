---
layout: modelviewer
title:  "Model1"
date:   2020-04-23 21:22:35 +0900
categories: monocle photogrammetry
poster: Model1.jpg
glb: Model1.glb
usdz: Model1.usdz
---
<a id="arLink" rel="ar">
![image-left](/assets/models/{{ page.poster }}){: .align-left}
</a>
A leasurely lady looking onward.  150 years old, porcelain.

<canvas id="renderCanvas" width="512px" height="320px" style="display: none;"></canvas>

<script>
// Check if AR is available.
var isARAvailable = function() {
    const a = document.createElement("a");
    return a.relList.supports("ar");
}

var delayCreateScene = function () {
  if(isARAvailable()) {
    var arLink = document.getElementById('arLink');
    arLink.setAttribute("href","/assets/models/{{ page.usdz }}");
  } else {
    var canvas = document.getElementById('renderCanvas');
    canvas.style.display = 'inline';
    var engine = new BABYLON.Engine(canvas, true);
    var scene = new BABYLON.Scene(engine);

    // Load the GLB model.
    BABYLON.SceneLoader.ShowLoadingScreen = false;
    // TODO: Custom Loading Screen
    // https://youtu.be/cLqK9vgTKBw
    // https://playground.babylonjs.com/#5Y2GIC#38

    BABYLON.SceneLoader.Append("/assets/models/", "{{ page.glb }}", scene, function (newMeshes) {
        scene.createDefaultCameraOrLight(true);
        scene.activeCamera.attachControl(canvas, false);
        scene.activeCamera.alpha += Math.PI; // camera +180Â°

        // run the render loop
        engine.runRenderLoop(function(){
            scene.render();
        });

        // the canvas/window resize event handler
        window.addEventListener('resize', function(){
            engine.resize();
        });
    });

    return scene;
  }
}

window.addEventListener('DOMContentLoaded', function() {delayCreateScene();});
</script>

<!-- Link to the last version of BabylonJS -->
<script src="https://preview.babylonjs.com/babylon.js"></script>
<!-- Link to the last version of BabylonJS loaders to enable loading filetypes such as .gltf -->
<script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
<!-- Link to pep.js to ensure pointer events work consistently in all browsers -->
<script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>
